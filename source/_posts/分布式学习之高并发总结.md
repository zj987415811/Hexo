---
title: 分布式学习之高并发总结
date: 2018-08-09 15:26:21
tags: 高并发
---
## 分布式学习之高并发总结 ##
- 千万级高并发总结：
	
	1. 所有的性能提升，最终落在CPU,内存，IO，网络这4块。
	2. 抽象能力，分类能力，算法
	3. 客户端->接入层->后台（搜索，平台，大数据）
	4. RPC
	5. 消息中间件：两个模块之间的交互异步化，同时把不均匀的请求流量输出为匀速的输出流量，异步化解耦和流量削峰。
	6. 配置管理：灰度发布，服务降级
	7. 无状态：将有状态的东西剥离到数据层
	8. 分布式服务追踪解决的问题：通过唯一id
- 高并发实时后台服务架构
	
	1. 流控：扩容 ddos攻击 nginx
	2. 负载均衡
	3. 接入层：校验登陆态 无状态的横向扩展
	4. 逻辑层：
		1. 前轻后重 RPC服务来提供和实现
		2. 缩短关键业务流程
		3. 降低单个接口处理耗时---代码架构系统部署
		4. 同步变异步：同步接口转化为异步接口 保证吞吐量 I/O多路复用
		5. 隔离:逻辑层具备业务隔离能力，整体隔离，内部隔离
	4. 存储层
		1. 数据快速访问 一致性安全问题 缓存 分库分表
		2. 数据如何同步备份
- 高并发与实时处理技术
	- 高并发下缓存治理
		- I/O是导致IT系统无法完成高并发的主要原因。
		- 解决I/O速度问题就是将计算结果临时存储，也就是缓存。
		- 缓存治理的困难
			- 应用无感的合理使用缓存
			- 对现有缓存乱使用的迁移
			- 缓存研发方案---缓存场景隔离化，数据量分配的合理化以及缓存的分离。


- 常见并发同步案例分析
	-  订票系统案例
		-  锁同步：程序层面，多个线程进来，只有一个一个访问。锁有两个层面，一个是java的对象锁，用于线程同步；另一个是数据库锁，如果是分布式系统，只能用数据库端的锁来实现。
		-  乐观锁和悲观锁 乐观锁在不锁定表的情况，利用业务来控制解决并发问题。保证并发可读+数据存储的排他性+保证性能同时解决并发带来的脏数据问题。
	
	- 股票交易
		- 表拆分 按业务拆分 时间轴分区
		- 缓存
	
	- 高并发提高访问效率手段
		- 瓶颈：服务带宽 web线程连接数 数据库连接查询
		- 增加带宽，DNS域名解析 负载均衡 前置代理服务器 数据库查询优化，读写分离，分表。
		- 复制在高并发的情况：尽量使用缓存，用户缓存，信息缓存，大量减少与数据库的交换，提高性能。 找出性能瓶颈，减少额外开销，优化查询语句。单台机器的瓶颈。
- 1500万QPS背后的高性能，高可用实时搜索系统架构演变
- 12306如何实现流量并发的关键技术
	- 关键技术
		- 利用云计算资源分担系统查询业务，弹性扩展
		- 双中心运行架构
		- 带宽保证
		- 防恶意抢票
		- 应急方案
	- 设计思路	
		- 关联数据节点设计
		- 将数据移到内存
- 金融环境高并发方案
- 